const books = [
  {
    title: "Horrible Histories",
    cover: "b1.jpg",
    category: "Physical",
    subcategory: "Teens",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header",
    
  },
  {
    title: "Awesome Egyptians",
    cover: "b2.jpg",
    category: "Physical",
    subcategory: "Teens",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "Things Fall Apart",
    cover: "b3.jpg",
    category: "Physical",
    subcategory: "Youth",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "Terry Pratchet",
    cover: "b4.jpg",
    category: "Physical",
    subcategory: "Teens",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "Middle School- Get Me Out Of Here",
    cover: "b5.jpg",
    category: "Physical",
    subcategory: "Teens",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "Tom Gates Extra Special Treats",
    cover: "b6.jpg",
    category: "Physical",
    subcategory: "Teens",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "Tooth And Claw",
    cover: "b7.jpg",
    category: "Physical",
    subcategory: "Teens",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "Four Children and IT",
    cover: "b8.jpg",
    category: "Physical",
    subcategory: "Teens",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "The Taming Of The Tights",
    cover: "b9.jpg",
    category: "Physical",
    subcategory: "Youth",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "Shoutykid",
    cover: "b10.jpg",
    category: "Physical",
    subcategory: "Teens",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "Middle School- The Worst Year Of My Life",
    cover: "b11.jpg",
    category: "Physical",
    subcategory: "Teens",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "Me SuzyP",
    cover: "b12.jpg",
    category: "Physical",
    subcategory: "Youth",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "The Third Pig Dectective Agency",
    cover: "b13.jpg",
    category: "Physical",
    subcategory: "Youth",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "Bursting Bubbles",
    cover: "b14.jpg",
    category: "Physical",
    subcategory: "Youth",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "Kick",
    cover: "b15.jpg",
    category: "Physical",
    subcategory: "Teens",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "Noughts & Crosses",
    cover: "b16.jpg",
    category: "Physical",
    subcategory: "Youth",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "Holly Smale",
    cover: "b17.jpg",
    category: "Physical",
    subcategory: "Teens",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "The Davinic Code",
    cover: "b18.jpg",
    category: "Physical",
    subcategory: "Youth",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "An Abundance of Katherines",
    cover: "b19.jpg",
    category: "Physical",
    subcategory: "Teens",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "Someone Like You",
    cover: "b20.jpg",
    category: "Physical",
    subcategory: "Teens",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },
  {
    title: "Flora In Love",
    cover: "b21.jpg",
    category: "Physical",
    subcategory: "Youth",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "A Guy's Guide To Life ",
    cover: "b22.jpg",
    category: "Physical",
    subcategory: "Productivity",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "Jane Eyre",
    cover: "b23.jpg",
    category: "Physical",
    subcategory: "Youth",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "After Iris",
    cover: "b24.jpg",
    category: "Physical",
    subcategory: "Youth",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },{
    title: "The Boy In The Striped Pyjamas",
    cover: "b25.jpg",
    category: "Physical",
    subcategory: "Teens",
    description: "A guide to building good habits and breaking bad ones.",
    rentLink: "https://docs.google.com/forms/d/e/1FAIpQLSdPVKDERSVaO2MjSQR1P1LTDI6jxm-vN-xKcl0pShinoda1Yw/viewform?usp=header"
  },

  {
    title: "Romeo & Juliet",
    cover: "rom.jpg",
    category: "Online",
    subcategory: "novel",
    description: "A classic on personal wealth and mindset.",
    downloadLink: "romeo-and-juliet.pdf"
  },
  {
    title: "The Time Machine",
    cover: "time.jpg",
    category: "Online",
    subcategory: "novel",
    description: "Insights on financial literacy and investing.",
    downloadLink: "the-time-machine.pdf"
  },
  
  {
    title: "The Notebook",
    cover: "https://covers.openlibrary.org/b/id/9253691-L.jpg",
    category: "Productivity",
    subcategory: "Learning",
    description: "A love story by Nicholas Sparks.",
    downloadLink: "t.pdf"
  }
];


const bookList = document.getElementById("book-list");
const searchInput = document.getElementById("search");
const categoryFilter = document.getElementById("categoryFilter");
const subcategoryFilter = document.getElementById("subcategoryFilter");
const modal = document.getElementById("bookModal");

function displayBooks(bookArray) {
  bookList.innerHTML = "";
  bookArray.forEach(book => {
    const card = document.createElement("div");
    card.className = "book-card";

    const rentOrDownloadButton = book.downloadLink
      ? `<a href="${book.downloadLink}" download class="download-btn">ðŸ“¥ Download</a>`
      : book.rentLink
      ? `<a href="${book.rentLink}" class="rent-btn">Rent</a>`
      : "";

    card.innerHTML = `
      <img src="${book.cover}" alt="${book.title}" class="book-cover" onclick="showBookDetails('${book.title}')"/>
      <h3>${book.title}</h3>
      <p>${book.category} > ${book.subcategory}</p>
      ${rentOrDownloadButton}
    `;
    bookList.appendChild(card);
  });
}

function showBookDetails(title) {
  const book = books.find(b => b.title === title);
  if (!book) return;

  document.getElementById("modalCover").src = book.cover;
  document.getElementById("modalTitle").textContent = book.title;
  document.getElementById("modalDescription").textContent = book.description;

  const modalBtnContainer = document.getElementById("modalBtnContainer");
  modalBtnContainer.innerHTML = book.downloadLink
    ? `<a href="${book.downloadLink}" download class="download-btn">ðŸ“¥ Download</a>`
    : book.rentLink
    ? `<a href="${book.rentLink}" class="rent-btn">Rent</a>`
    : "";

  modal.style.display = "flex";
}

function populateSubcategories(category) {
  const subcategories = [...new Set(
    books.filter(b => b.category === category).map(b => b.subcategory)
  )];

  subcategoryFilter.innerHTML = `<option value="All">All Subcategories</option>`;
  subcategories.forEach(sub => {
    const option = document.createElement("option");
    option.value = sub;
    option.textContent = sub;
    subcategoryFilter.appendChild(option);
  });
}

function filterBooks() {
  const query = searchInput.value.toLowerCase();
  const selectedCategory = categoryFilter.value;
  const selectedSubcategory = subcategoryFilter.value;

  const filtered = books.filter(book => {
    const matchTitle = book.title.toLowerCase().includes(query);
    const matchCategory = selectedCategory === "All" || book.category === selectedCategory;
    const matchSubcategory = selectedSubcategory === "All" || book.subcategory === selectedSubcategory;
    return matchTitle && matchCategory && matchSubcategory;
  });

  displayBooks(filtered);
}

searchInput.addEventListener("input", filterBooks);

categoryFilter.addEventListener("change", () => {
  const selected = categoryFilter.value;
  if (selected === "All") {
    subcategoryFilter.innerHTML = `<option value="All">All Subcategories</option>`;
  } else {
    populateSubcategories(selected);
  }
  filterBooks();
});

subcategoryFilter.addEventListener("change", filterBooks);

document.querySelector(".close-btn").onclick = () => {
  modal.style.display = "none";
};

window.onclick = (e) => {
  if (e.target === modal) modal.style.display = "none";
};

displayBooks(books);